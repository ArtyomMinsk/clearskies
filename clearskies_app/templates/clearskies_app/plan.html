{% extends 'clearskies_app/base.html' %}
{% load static %}
{% block title %}Welcome to ClearSkies{% endblock %}
{% block content %}
<div id="greeting">
  <h1>Test</h1>
</div>
<form method="post">
{% csrf_token %}
  <div class="ui-widget" id="legs">
    <input type="text" class="tags">
  </div>
  <!-- <input type="submit"> -->
</form>
<button id="addField">Add Waypoint</button>
<script>
// $( function() {
  var availableTags = [
    {% for airfield in airfields %}
    '{{airfield.identifier}}-{{airfield.name}}-{{airfield.city}}, {{airfield.state}}',
    {% endfor %}
  ];
  $('.tags').on("focus", function(){
    $(this).autocomplete({
     minLength: 2,
     source: availableTags
      });
    });

  $('#addField').click(function(event) {
    event.preventDefault();
    $('.ui-widget').append('<input name="waypoint" class="tags"><button class="remove"><img src="{% static "img/cross-solid.png" %}"></button>');
    $('.tags').on("focus", function(){
      $(this).autocomplete({
       minLength: 2,
       source: availableTags
        });
      });
    $('.remove').click(function(event) {
      event.preventDefault();
      console.log('Hello');
      $(this).prev().remove();
      $(this).remove();
      // return false;
    });
  })

  //   $( ".tags" ).autocomplete({
  //     source: availableTags,
  //     minLength: 3,
  //   });
  // } );
</script>
{% endblock %}
