{% extends 'clearskies_app/base.html' %}
{% load static %}
{% block title %}Welcome to ClearSkies{% endblock %}
{% block content %}
<div id="greeting">
  <h1>Test</h1>
</div>
<form method="post">
{% csrf_token %}
  <ul class="ui-widget" id="legs">
    <li><input type="text" class="tags"></li>
  </ul>
  <!-- <input type="submit"> -->
</form>
<ul>
<li><button id="addField"><img src="{% static 'img/plus_symbol.svg' %}"><span>ADD WAYPOINT</span></button></li>
</ul>
<script>
// $( function() {
  var availableTags = [
    {% for airfield in airfields %}
    '{{airfield.identifier}}-{{airfield.name}}-{{airfield.city}}, {{airfield.state}}',
    {% endfor %}
  ];
  $('.tags').on("focus", function(){
    $(this).autocomplete({
     minLength: 2,
     source: availableTags
      });
    });

  $('#addField').click(function(event) {
    event.preventDefault();
    $('.ui-widget').append('<li><input name="waypoint" class="tags"><button class="remove"><img src="{% static "img/deleteglyph.svg" %}"></button></li>');
    $('.tags').on("focus", function(){
      $(this).autocomplete({
       minLength: 2,
       source: availableTags
        });
      });
    $('.remove').click(function(event) {
      event.preventDefault();
      console.log('Hello');
      $(this).prev().remove();
      $(this).parent().remove()
      $(this).remove();
      // return false;
    });
  })

  //   $( ".tags" ).autocomplete({
  //     source: availableTags,
  //     minLength: 3,
  //   });
  // } );
</script>
{% endblock %}
